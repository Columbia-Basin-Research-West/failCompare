---
title: "Failure model comparison"
author: Steve Whitlock
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Taglife_failure_model_comparison}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}


library(failCompare)

```

### loading data

load the example data set from Rocky Reach Dam, Washigton State.

```{r load}
data(sockeye)
taglife=sockeye$days   # vector of tag failure times

# taglife=c(6.12,10.42,12.33,13.62,13.62,14.29,14.46,14.67,14.79,14.96,15.04,15.12,15.21,15.33,15.42,15.50,15.50,15.62,15.67,
# 15.75,15.75,15.79,15.87,16.04,16.08,16.08,16.08,16.17,16.17,16.17,16.25,16.25,16.29,16.29,16.37,16.37,16.54,16.71,
# 16.71,16.71,16.71,16.79,16.83,17.42,17.58,17.71,17.71,17.96,18.04,18.50)


taglife

```

### Creating a failure model object

```{r single_mod,warning=FALSE}

weib_mod=fc_fit(time=taglife,model="weibull")
weib_mod

vit13_mod=fc_fit(time=taglife,model="vitality.4p")
vit13_mod

```
### Plotting separate model objects

```{r fig, fig.width=11, fig.height=5,echo=TRUE,warning=FALSE,fig.width=5, fig.height=5}

  par(mfrow=c(1,2))
  plot(weib_mod)
  plot(vit13_mod)
```

### Creating alternate model sets

```{r mod sets,warning=FALSE,fig.width=5, fig.height=5}

fmods=fc_fit(taglife,c("weibull","gompertz","gamma","lognormal"))
fmods
par(mfrow=c(1,1))
plot(fmods)
fc_rank(fmods)
```

### Ranking models
```{r mod rank,warning=FALSE,fig.width=5, fig.height=5}

fc_fit(taglife,"weibull")
fc_fit(taglife,"weibull3")


fmods_all=fc_fit(taglife,"all")
fmods_all
fmods_all_ranked=fc_rank(fmods_all)
par(mfrow=c(1,1))
plot(fmods_all_ranked)

plot(fmods_all_ranked,c("vitality.ku","vitality.4p"))

plot(fmods_all_ranked,c("gamma","weibull"))

```

